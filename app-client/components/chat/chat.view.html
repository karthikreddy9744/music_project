<style>
    .chat-window { border: 1px solid #ddd; height: 60vh; overflow-y: auto; padding: 15px; margin-bottom: 15px; background-color: #f9f9f9; }
    .message { margin-bottom: 10px; padding: 8px 12px; border-radius: 18px; max-width: 80%; }
    .message.user { background-color: #007bff; color: white; margin-left: auto; text-align: right; }
    .message.model { background-color: #e9e9eb; color: #333; margin-right: auto; }
    .loading-dots span { display: inline-block; width: 8px; height: 8px; border-radius: 50%; background-color: #aaa; margin: 0 2px; animation: bounce 1.4s infinite ease-in-out both; }
    .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
    .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
    @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
</style>

<div class="row">
    <div class="col-md-8 col-md-offset-2">
        <h1 class="page-header">{{ vm.pageHeader.title }}</h1>

        <div class="chat-window">
            <div ng-repeat="msg in vm.messages track by $index" class="message" ng-class="msg.role">
                <p style="white-space: pre-wrap; margin: 0;">{{ msg.text }}</p>
            </div>
            <div ng-if="vm.isLoading" class="message model loading-dots">
                <span></span><span></span><span></span>
            </div>
        </div>

        <form ng-submit="vm.sendMessage()">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Ask me anything about music or festivals..." ng-model="vm.newMessage" ng-disabled="vm.isLoading">
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit" ng-disabled="vm.isLoading">Send</button>
                </span>
            </div>
        </form>
    </div>
</div>